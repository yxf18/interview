# Problem: DNS 什么时候用递归查询？什么时候用迭代查询？

*[interview]: start
DNS（Domain Name System）在进行域名解析时可以使用递归查询和迭代查询两种不同的方式：

1. **递归查询（Recursive Query）：** 当客户端向本地 DNS 服务器发出域名解析请求时，如果本地 DNS 服务器支持递归查询，它会负责向根域名服务器开始递归地查询，直到找到与请求对应的 IP 地址，并将结果返回给客户端。递归查询是 DNS 解析过程中常见的一种方式，客户端发送一次请求，本地 DNS 服务器负责完成整个解析过程。

2. **迭代查询（Iterative Query）：** 当本地 DNS 服务器向根域名服务器或其他 DNS 服务器发送域名解析请求时，如果收到的响应不包含所需的 IP 地址，它将会继续向更高一级的 DNS 服务器发出迭代查询，直到找到对应的 IP 地址或达到根域名服务器。迭代查询是 DNS 解析过程中用于逐级查询的一种方式，每个 DNS 服务器只负责回复给出下一级 DNS 服务器的地址。

总体而言，递归查询由客户端向本地 DNS 服务器发出，本地 DNS 服务器负责完成整个解析过程；而迭代查询则是 DNS 服务器之间相互通信进行逐级查询的过程。

在实际应用中，通常情况下，客户端向本地 DNS 服务器发出的解析请求使用递归查询，而本地 DNS 服务器与其他 DNS 服务器之间的通信则采用迭代查询。这样设计既保证了解析效率，又有助于减轻根域名服务器和顶级域名服务器的负载。

## 关键词: #DNS #递归查询 #迭代查询
*[interview]: end
