# Problem: 哪些操作会造成内存泄漏?

*[interview]: start
## 定义
内存泄漏指不用拥有或需要任何对象（数据）之后，它们仍然存在于内存中。
垃圾回收器定期扫描对象，并计算引用了每个对象的其他对象的数量。如果一个对象的引用数量为0（没有其他对象引用过该对象），或对该对象的唯一引用是循环的，那么该对象占用的内存立即被回收。

## 可能会触发内存泄漏的情况
1. **意外的全局变量**：如果一个变量未被正确声明，就会自动创建一个全局变量，导致在函数执行完毕后该变量仍然存在于内存中，造成内存泄漏。
2. **闭包**：使用闭包时需要注意，如果没有及时清除对函数变量的引用，就会造成内存泄漏。
3. **定时器**：如果定时器没有被正确清除，就会持续占用内存，造成内存泄漏。
4. **DOM操作**：如果在DOM元素被删除前，没有正确地清除对其的引用，就会造成内存泄漏。
5. **循环引用**：如果两个对象之间存在循环引用，且没有及时清除引用，就会造成内存泄漏。
6. **大量数据的存储**：如果需要存储大量的数据，且没有采用适当的方式清除过期数据或不再需要的数据，就会造成内存泄漏。

## 如何解决
- 少用全局变量，避免产生意外的全局变量
- 使用闭包时，手动将引用置null
- 记得清理不用的定时器
- 避免循环引用
- 可以使用weakSet和weakMap弱引用
- 及时清理dom引用与dom事件监听

## 关键词: 全局变量、闭包、定时器、事件监听器、循环医用、weakMap

*[interview]: end
