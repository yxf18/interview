# Problem: new Function有什么应用场景？

*[interview]: start
`new Function` 是 JavaScript 中创建一个新函数实例的构造函数语法。它允许你动态地创建函数，其语法如下：

```javascript
new Function ([arg1[, arg2[, ...argN]],] functionBody)
```

- `arg1, arg2, ... argN` 是函数的参数名，都是字符串。
- `functionBody` 是函数体，它是一个包含了函数定义的字符串。

使用 `new Function` 有几个特定的应用场景：

### 1. 动态执行代码
`new Function` 可以用来动态地执行字符串中的代码。这在你需要执行由用户输入、从服务器加载或者通过其他方式构造的代码时非常有用。比如，你可能从一个配置文件加载一段代码，然后用 `new Function` 执行它。

### 2. 无作用域限制的评估
与 `eval` 不同，`new Function` 创建的函数体不会在当前作用域执行，它在全局作用域中执行。这意味着它不能访问本地作用域中的变量，这在某些情况下可以提供更好的安全性，因为它避免了直接访问和修改当前作用域的变量。

### 3. JSONP请求
在跨域请求数据时，JSONP（JSON with Padding）是一种解决方案，它通过动态创建`<script>`标签来绕过同源策略限制。`new Function` 可以用来执行从服务器返回的包装在函数调用中的JSON数据。

### 4. 模板引擎
`new Function` 可以用于实现简单的模板引擎。通过动态创建一个函数，将模板字符串中的变量替换为实际的值，然后返回渲染后的字符串。这种方式可以动态地将数据绑定到 HTML 模板中。

### 注意事项

尽管 `new Function` 提供了强大的灵活性，但它也带来了一些潜在的安全问题，特别是当你执行的代码包含未知或不可信的输入时。动态执行代码可以使应用容易受到注入攻击，因此，在使用 `new Function` 时需要谨慎，确保输入是可信的或经过适当的清洗和验证。此外，由于它会在全局作用域中执行代码，可能会导致预期之外的变量污染等问题。

## 关键词: 动态执行代码，无作用域限制的评估，JSONP请求，模板引擎
*[interview]: end
