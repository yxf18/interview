# Problem: 什么是死锁?

*[interview]: start
## 死锁
如果一组进程中每一个进程都在等待仅由该组进程中的其他进程才能引发的事件，那么该组进程是死锁的。换言之：死锁就是两个线程同时占用两个资源，但又在彼此等待对方释放锁。

举例来说:有两个进程 A 和 B，A 持有资源 a 等待 b 资源，B 持有资源 b 等待 a 资源，两个进程都在等待另一个资源的同时不释放资源，就形成死锁。

## 1.死锁产生的四个必要条件
1. 互斥条件：一个资源每次只能被一个进程使用。
2. 请求和保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放
3. 不剥夺条件：进程已获得的资源，在未使用完之前，不能强行剥夺
4. 循环等待条件：若干进程之间形成一种头尾相接的循环等待资源关系

## 2.死锁处理
- 预防死锁：破坏四个必要条件中的一个或多个来预防死锁
- 避免死锁：在资源动态分配的过程中，用某种方式防止系统进入不安全的状态
- 检测死锁：运行时产生死锁，及时发现死锁，将程序解脱出来。
- 解除死锁：发生死锁时，撤销进程，回收资源，分配给正在阻塞状态的进程。

### 2.1 预防死锁的方法：
- 破坏请求和保持条件：一次性的申请所有资源，之后不在申请资源，如果不满足资源条件则得不到资源分配。只获得初期资源运行，之后将运行完的资源释放，请求新的资源

- 破坏不可抢占条件：当一个进程获得某种不可抢占资源，提出新的资源申请，若不能满足，则释放所有资源，以后需要的时候则再次重新申请。

- 破坏循环等待条件：对资源进行排号，按照序号递增的顺序请求资源。若进程获得序号高的资源想要获取序号低的资源，则需要先释放序号高的资源。

## 2.2死锁的接触方法：
- 抢占资源。从一个或多个进程中抢占足够数量的资源，分配给死锁进程，以解除死锁状态
- 终止(撤销)进程：将一个或多个死锁进程终止(撤销)，直至打破循环环路，使系统从死锁状态解脱

## 关键词: 死锁
*[interview]: end
