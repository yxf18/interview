# Problem: 说说浏览器渲染流程，分层之后在什么时候合成?

*[interview]: start
## 浏览器渲染流程
1. 解析HTML: HTML字符串 -> HTML树 和 CSSOM树
2. 样式计算: HTML树 和 CSSOM树 -> 获得 布局树(computed style tree)
3. 布局: 根据布局树  -> 布局信息
4. 分层: 根据布局信息 -> 分层
5. 绘制: 根据每层信息 --> 绘制
6. 分块: 绘制第一步 -> 分块
7. 光栅化: 绘制第二步光栅化 -> 位图
8. 画: 根据位图发送图块命令 DrawQuad 给浏览器进程 -> 像素信息

## 分层之后在什么时候合成
在**光栅化**之后合成。光栅化就是按照绘制列表中的指令生成图片。每一个图层都对应一张图片，合成线程有了这些图片之后，会将这些图片合成为“一张”图片，并最终将生成的图片发送到后缓冲区。这就是一个大致的分层、合成流程。

## 关键词: 光栅化
*[interview]: end
