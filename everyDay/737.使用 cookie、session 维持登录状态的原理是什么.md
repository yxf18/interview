# Problem: 使用 cookie、session 维持登录状态的原理是什么?

*[interview]: start
使用 cookie 和 session 维持登录状态的原理如下：

1. **登录过程**：
   - 用户在登录页面输入用户名和密码，提交登录请求。
   - 服务器验证用户的身份信息，如果验证通过，则创建一个会话（session），并为该会话生成一个唯一的会话标识（session ID）。
   - 服务器将会话标识存储在服务器端的存储介质中（通常是内存或数据库），同时将会话标识发送给客户端。

2. **使用 Cookie 存储会话标识**：
   - 服务器在响应头中设置一个名为 `Set-Cookie` 的 HTTP 头，将会话标识作为值存储在一个名为 `sessionId` 的 cookie 中，并设置其过期时间。
   - 客户端收到响应后，浏览器会将 `sessionId` cookie 存储在本地。

3. **后续请求**：
   - 当用户发送其他请求时（如访问其他页面或者进行其他操作），浏览器会自动将之前存储的 `sessionId` cookie 添加到请求头中。
   - 服务器收到请求后，会从请求头中获取 `sessionId` cookie 的值，然后从存储介质中检索相应的会话信息。

4. **检查会话状态**：
   - 服务器根据 `sessionId` 获取相应的会话信息，验证用户的身份是否合法，并确定用户是否已登录。
   - 如果验证通过，服务器会处理请求，如果验证失败，服务器可能会要求用户重新登录或者执行其他操作。

通过以上流程，服务器可以识别特定的用户会话，并在客户端和服务器之间保持用户的登录状态。每当用户发送请求时，浏览器会自动携带会话标识，从而使服务器能够识别用户并提供相应的服务。这样就实现了基于 cookie 和 session 的登录状态维持。

## 关键词: cookie, session, 登录状态, 会话标识, Set-Cookie, sessionId
*[interview]: end
