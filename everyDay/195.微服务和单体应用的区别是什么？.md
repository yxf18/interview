# Problem: 微服务和单体应用的区别是什么？

*[interview]: start

## 一、单体应用架构
### （一）、单体应用架构概念
一个归档包（可以是JAR、WAR、EAR或其它归档格式）包含所有功能的应用程序，通常称为单体应用。
而架构单体应用的方法论，就是单体应用架构。
### （二）、单体应用架构的优缺点
### 优点
- 便于共享：单个归档文件包含所有功能，便于在团队之间以及不同的部署阶段之间共享。
- 易于测试：单体应用一旦部署，所有的服务或特性就都可以使用了，这简化了测试过程，因为没有额外的依赖，每项测试都可以在部署完成后立刻开始。
- 易于部署：只需将单个归档文件复制到单个目录下。
### 缺点
- 复杂性高：由于是单个归档文件，所以整个项目文件包含的模块非常多，导致模块的边界模糊、依赖关系不清晰、代码的质量参差不齐，混乱的堆在一起，使得整个项目非常复杂。以致每次修改代码，都非常小心，可能添加一个简单的功能，或者修改一个Bug都会带来隐藏的缺陷。
- 技术债务：随着时间的推移、需求的变更和技术人员的更替，会逐渐形成应用程序的技术债务，并且越积越多。
- 扩展能力受限：单体应用只能作为一个整体进行扩展，无法根据业务模块的需要进行伸缩。
- 阻碍技术创新：对于单体应用来说，技术是在开发之前经过慎重评估后选定的，每个团队成员都必须使用相同的开发语言、持久化存储及消息系统。

## 二、微服务架构
### （一）、微服务架构概念
微服务架构风格是一种将一个单一应用程序开发为一组小型服务的方法，每个服务运行在自己的进程中，服务间通信采用轻量级通信机制。这些服务围绕业务能力构建并且可通过全自动部署机制独立部署。这些服务共用一个最小型的集中式的管理，服务可用不同的语言开发，使用不同的数据存储技术。
### （二）、微服务架构的优缺点
### 优点
- **易于开发和维护**：一个微服务只会关注一个特定的业务功能，所以业务清晰、代码量较少。开发和维护单个微服务相对简单。
- 单个微服务启动较快
- 局部修改容易部署：单体应用只要有修改，就得重新部署整个应用。微服务解决了这样的问题。一般来说，对某个微服务进行修改，只需要重新部署这个服务即可。
- **技术栈不受限制**：在微服务架构中，可以结合项目业务及团队的特点，合理的选择技术栈。
- 按需伸缩：可根据需求，实现细粒度的扩展。
- **独立部署**: 由于微服务具备独立的运行进程，所以每个微服务也可以独立部署。当某个微服务发生变更时无需编译、部署整个应用。由微服 务组成的应用相当于具备一系列可并行的发布流程，使得发布更加高效，同时降低对生产环境所造成的风险，最终缩短应用交付周期。
- **容错**: 当某一组建发生故障时，在单一进程的传统架构下，故障很有可 能在进程内扩散，形成应用全局性的不可用。在微服务架构下， 故障会被隔离在单个服务中。若设计良好，其他服务可通过重试、 平稳退化等机制实现应用层面的容错。
### 缺点
- 运维要求高：更多的服务意味着要投入更多的运维。
- 分布式固有的复杂性：使用微服务构建的是分布式系统。对于一个分布式系统，系统容错、网络延迟、分布式事务等都会带来巨大的问题。
- 接口调整成本高：微服务之间通过接口进行通信。如果修改某一个微服务的API，可能所有用到这个接口的微服务都需要进行调整。
- **维护成本高**: 由于技术栈不统一，可能对开发者有更高的要求

## 三、微服务架构VS单体架构

1. 分工不同
以前我们通常是一个有规模的团队围绕一个单体应用工作，可能是一人一个模块；
微服务架构可以为软件开发提供不同的方法，把传统模式下的单体应用拆分成独立的服务，从而可以单独开发、单独部署、单独维护，在微服务架构下可能是一人一个系统。

2. 存储方式不同
单体架构所有的模块都共用一个数据库，存储方式比较单一；
微服务每个模块都可以使用不同的存储方式（比如有的用redis，有的用mysql等），数据库也是单个模块对应自己的数据库。

3. 部署方式不同
在单体应用中，每次功能的变更或缺陷的修复都会导致需要重新部署整个应用；
微服务架构服务可独立部署，并且可以独立于其他服务进行扩展，如果部署得当，基于微服务的架构可以帮助业务避免欠下技术债务，以及大幅提高效率的重大价值。

4. 容灾不同
当某一组建发生故障时，在单一进程的传统架构下，故障很有可能在进程内扩散，形成应用全局性的不可用。
在微服务架构下，故障会被隔离在单个服务中。好的微服务可以隔离故障避免服务整体down掉，坏的微服务设计仍然可以因为一个子服务出现问题导致连锁反应。

5. 开发模式不同
单体架构所有的模块开发所使用的技术一样，开发模式比较受限；
微服务每个模块都可以使用不同的开发技术，开发模式更灵活；

## 关键词: 独立开发部署、技术栈解耦、容灾性、维护成本高
*[interview]: end
