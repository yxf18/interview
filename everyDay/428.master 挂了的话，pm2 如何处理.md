# Problem: master 挂了的话，pm2 如何处理?

*[interview]: start
当使用 PM2 管理 Node.js 应用程序时，如果主进程（Master）挂了，PM2 会尝试自动重启应用程序。

PM2 是一个进程管理工具，它可以监控和管理 Node.js 应用程序的运行。它会启动一个主进程（Master），该进程负责管理和监控应用程序的子进程（Worker）。如果主进程挂了，PM2 会检测到主进程的退出，并尝试自动重启应用程序。

下面是 PM2 在主进程挂掉时的处理过程：
1. PM2 监测到主进程的退出。这可以是由于应用程序崩溃、抛出未捕获的异常或其他原因导致的。

2. PM2 会尝试自动重启应用程序。它会重新启动新的主进程，并根据之前的配置启动相应数量的子进程。

3. 如果配置中设置了 max_restarts，PM2 会检查应用程序的重启次数是否超过了限制。如果超过了限制，PM2 可能会认为应用程序处于错误状态，并停止重启。

需要注意的是，如果应用程序在短时间内频繁崩溃并重启，这可能是一个持续出错的迹象。在这种情况下，PM2 可能会停止重启应用程序，并将其标记为错误状态。此时，可以查看 PM2 的日志文件来了解详细的错误信息，并进行故障排查。

可以通过以下命令查看 PM2 的日志：
`pm2 logs`
此外，PM2 还提供了其他命令和功能，例如监控应用程序的状态、动态调整应用程序的数量等。可以通过 PM2 的官方文档来了解更多关于 PM2 的使用和配置信息。

## 关键词: 尝试自动重启应用程序
*[interview]: end
