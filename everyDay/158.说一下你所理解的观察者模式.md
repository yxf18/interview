# Problem: 说一下你所理解的观察者模式?

*[interview]: start
## 定义
观察者模式（Observer Pattern），是一种常见的**设计模式**，用于处理对象之间的**一对多**关系，当一个对象的状态发生改变时，所有依赖它的对象都会自动得到通知并更新。这种模式通过解耦发送者和接收者之间的关系，实现了对象间的松耦合，提高了系统的可扩展性和复用性。

## 在观察者模式中，通常包括以下几个角色：
1. **Subject（主题）**：是被观察的对象，具有增加、删除和通知观察者的方法。
2. **Observer（观察者）**：观察者对象，接收主题的通知并进行更新的操作。
3. **ConcreteSubject（具体主题）**：实现主题接口的具体对象，维护观察者列表，并在状态发生变化时通知观察者。
4. **ConcreteObserver（具体观察者）**：实现观察者接口的具体对象，接收主题的通知并进行更新操作。

## 观察者模式的基本流程如下：
1. 主题（Subject）中**维护一个观察者（Observer）列表，当状态发生变化时，通知所有观察者**。
2. 观察者（Observer）在注册时将自己添加到主题（Subject）的观察者列表中，并在接收到主题通知时进行更新操作。
3. 具体主题（ConcreteSubject）和具体观察者（ConcreteObserver）实现主题和观察者接口，并具有各自的状态和行为。

## 观察者模式的优点是：
1. 降低了主题和观察者之间的耦合度，使得主题和观察者可以独立地进行扩展和变化，提高了系统的灵活性和可维护性。
2. 支持广播通信，当一个对象的状态发生改变时，所有依赖它的对象都会得到通知，实现了对象间的松耦合。

## 观察者模式的缺点是：
1. 当观察者过多时，通知所有观察者的开销比较大，可能会影响系统性能。
2. 观察者和主题之间的通信是双向的，容易产生循环依赖问题。需要谨慎使用，避免出现不必要的复杂性。

## 观察者模式与发布-订阅模式的比较
|   特性   	|        观察者模式 (Observer Pattern)       	|    发布-订阅模式 (Publish-Subscribe Pattern)   	|
|:--------:	|:------------------------------------------:	|:----------------------------------------------:	|
| 结构     	| 一对多（一个主题到多个观察者）。           	| 一对多（一个发布者到多个订阅者）。             	|
| 耦合度   	| 主题和观察者之间存在直接关联。             	| 发布者和订阅者通过消息中介解耦，互不直接关联。 	|
| 通知方式 	| 主题主动通知所有观察者。                   	| 发布者通过消息中介通知所有订阅者。             	|
| 适用场景 	| 通常用于UI、数据模型和多个视图之间的绑定。 	| 多组件之间的解耦，事件驱动架构，消息队列等。   	|
| 消息传递 	| 主题状态变化，通知观察者。                 	| 发布者发送消息，订阅者接收消息。               	|
| 灵活性   	| 相对较低，观察者与主题较为紧密。           	| 更高，发布者和订阅者通过中介解耦，灵活性大。   	|
### 适用场景：
- 观察者模式通常用于需要反应式更新的场景，如 UI 更新、数据变更通知等。
- 发布-订阅模式则常用于事件驱动架构或当多个系统或组件需要互不干扰地交换信息时。

## 关键词: 发布-订阅模式、设计模式、一对多
*[interview]: end
