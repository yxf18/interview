# Problem: JavaScript 里垃圾回收机制是什么?常用的是哪种，怎样处理的?

*[interview]: start

JavaScript中的垃圾回收机制是一种自动管理内存的机制，它负责检测不再被程序使用的内存，并自动释放这些内存，以便可供其他对象使用。垃圾回收机制的主要目标是避免内存泄漏和优化内存的使用。

在JavaScript中，常用的垃圾回收机制是基于**"标记-清除"**算法。该算法通过标记对象是否可访问来确定哪些对象是活动对象，哪些对象是垃圾对象。具体步骤如下：
1. **标记阶段（Marking Phase）**：从根对象开始，遍历所有的对象，并标记可访问的对象。根对象通常是全局对象（如window对象）或当前执行上下文的变量和参数。

2. **清除阶段（Sweeping Phase）**：遍历堆中的所有对象，清除未被标记的对象（即垃圾对象），释放它们占用的内存空间。

除了基于标记-清除算法的垃圾回收机制，JavaScript引擎还会使用其他技术来优化内存管理，如分代回收、增量回收、空闲时回收等。

在实际开发中，开发者无需手动管理内存释放，垃圾回收机制会自动处理不再被引用的对象的内存释放。但是，为了帮助垃圾回收机制的效率，开发者可以注意以下几点：
1. 及时释放引用：当对象不再使用时，尽量将其引用置为null，以便垃圾回收机制判定该对象为垃圾并释放其内存。

2. 避免循环引用：如果存在循环引用（对象A引用对象B，对象B引用对象A），即使它们已经不再被使用，垃圾回收机制也无法释放它们的内存。因此，需要注意避免循环引用的情况。

3. 尽量减少全局变量的使用：全局变量会一直存在于内存中，不容易被垃圾回收机制释放。应尽量使用局部变量或限制全局变量的使用范围。

需要注意的是，垃圾回收机制的实现细节可能因不同的JavaScript引擎而有所差异。不同浏览器和JavaScript运行环境可能采用略有不同的垃圾回收策略和优化算法。

## 关键词: 标记清除、引用清除、v8引擎回收机制，分为新生代，老生代、from/to
*[interview]: end
