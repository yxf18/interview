# Problem: 说一下网络通信中引入滑动窗口的作用

*[interview]: start
## 背景
在网络传输过程中, 如果发送数据包的速度大于接收数据包的速度, 这样会造成网络拥塞。所以, 为了控制发送方的发送速度, 提高网络传输效率, 产生了滑动窗口机制。

## 数据分片 MSS
数据从主机传输到另一台主机, 往往需要经过路由器、网关等, 这些设备都会对数据进行处理, 由于这些设备处理数据有一定的限制, 不能处理超过额定字节的数据, 所以发送的时候需要确定发送数据包的最大字节数。这个最大字节数称为最大消息长度。MSS是TCP数据包每次能够传输的最大数据量。通常最大值是1640字节, 如果发送的数据包大小大于MSS值. 数据包将会被分片传输。

## 定义
滑动窗口机制指的是:
在任意时刻, 发送方和接收方都维持了一个帧序号, 称为滑动窗口。
发送方称为发送窗口, 接收方称为接收窗口。
这种机制称为滑动窗口机制/协议。

窗口大小指的是可以发送数据的最大数量
滑动窗口机制-举例:
窗口通过滑动的方式, 向后移动, 确保下一次任然可以发送窗口大小的数据包。这样的发送方式, 被称为滑动窗口机制。

上图中, 设置窗口大小为3, 每1000个字节表示一个数据包。发送端同时发送了3个数据包(2001-5000), 接收端响应的确认应答包为"下一个发送4001", 表示接收端响应到了前两个数据包, 没有响应最后一个数据包, 此时, 最后一个数据包就会留在窗口中。由于窗口大小为3, 发送端除了最后一个数据包之外还可以发送下两个数据包, (5001-6000和6001-7000)。窗口滑动到7001处

## 作用
TCP用滑动窗口机制进行流量控制

## 分类
滑动窗口机制根据发送包的大小分为: 比特滑动窗口/停等协议、后退n协议、选择重传协议。

比特滑动窗口/停等协议

定义: 发送窗口为1, 接收窗口为1。比特滑动协议又称为停等协议

特点: 该协议规定, 发送方每发送一帧, 就要停下来等接收方接收后再发送。

缺点: 传输效率低。



后退n协议

定义: 发送窗口>1, 接收窗口=1

特点: 发送完一帧后, 不停下来等待, 而是连续发送若干个数据帧, 即使在连续发送过程中收到了接收方的应答帧, 也可以继续发送。且每发送完一个数据帧就要设置一个超时定时器。只要在所设置的超时时间内仍然没有确认帧, 就要重新发送。

缺点: 接收方若发现错误, 就不再接收后续的帧, 即使接收到正确的帧, 这造成了浪费。

> 流量控制和拥塞控制。在发送方发送数据时，会考虑接收方的接收能力，随时调整，使得数据发送和接收，都在一个最优的状态下
> 发送窗口与接收窗口，提升数据传输性能，可以解决流量控制的问题

## 关键词: 解决流量控制和拥塞控制
*[interview]: end
