# Problem: 请说说你对 Sparkplug 的理解？

*[interview]: start
[V8 有了全新的超快速非优化 JS 编译器，性能提高 5-15％](https://www.infoq.cn/article/ey2wgo19atdvbcnnj88y)

前言
首先，在 Chrome 浏览器中，V8 引擎负责 JavaScript 执行。其具有多个编译器，可以在执行 JavaScript 的各个阶段做出不同的取舍。三年前，Google 推出了一个两层编译器系统，由 Ignition 和 Turbofan 组成。Ignition 是一个字节码解释器，其工作是以尽可能少的延迟开始执行 JavaScript； Turbofan 是优化编译器，它根据在 JavaScript 执行过程中收集的信息生成高性能的机器代码，因此其启动速度比 Ignition 要慢。

想要编写高性能的 JavaScript 引擎，光是有高度优化的编译器(如 TurboFan)是不够的。特别是对于短生命周期的会话(例如加载网站或命令行工具)，在高优化编译器开始优化之前就已经有很多工作要做，更没有时间生成什么优化代码了。

正因如此，自 2016 年起，我们不再跟踪综合基准测试(如 Octane)的成绩，而是转而去衡量实际场景中的性能表现。并且从那时起，我们就一直在努力研究如何提升高优化编译器作用范围之外的 JavaScript 性能。这意味着我们需要在解析器、流式处理、对象模型、垃圾收集中的并发性、缓存编译后的代码等事项上逐个攻关……每一个领域都有新鲜的感觉。

当我们转向提升现实场景中初始 JavaScript 的执行性能，我们在优化解析器时开始遇到诸多局限。V8 的解析器经过高度优化，速度极快，但解析器总有一些固有开销是我们无法摆脱的；字节码解码开销或调度开销是解析器功能的内在组成部分。

基于我们目前的双编译器模式，我们很难更快地升级(tier-up)到优化代码；我们可以(并且正在)提升优化的效果，但在某些时候，想要提升速度就只能去掉一些优化项，但这会降低峰值性能。更糟糕的是，我们还无法提前优化进程，因为我们还没有稳定的对象形态反馈。

所以全新的非优化 JS 编辑器：Sparkplug 出现了，它已经随 V8 v9.1 发布。

## V8 引入全新的非优化 JS 编辑器：Sparkplug

## 关键词: JS编辑器
*[interview]: end
