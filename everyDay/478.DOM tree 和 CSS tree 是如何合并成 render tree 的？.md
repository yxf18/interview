# Problem: DOM tree 和 CSS tree 是如何合并成 render tree 的？

*[interview]: start
## 在浏览器中，渲染流程通常包括以下几个步骤：
1. **构建 DOM 树**： 浏览器解析 HTML 文件并构建 DOM 树，DOM 树表示文档的结构和内容。
2. **构建 CSSOM 树**： 浏览器解析 CSS 文件并构建 CSSOM 树，CSSOM 树表示样式规则和它们的层叠关系。
3. **合并 DOM 树和 CSSOM 树**： 浏览器将 DOM 树和 CSSOM 树合并成一个**渲染树（Render Tree）**。渲染树只包含需要显示的节点，例如可见元素和它们的样式信息。
4. **布局计算(layout)：** 渲染树中的每个节点都有其在视口中的位置和大小，这是通过布局计算（也称为**回流或重排**）来确定的。
5. **绘制：** 浏览器根据渲染树和布局计算结果将页面绘制到屏幕上。

合并 DOM 树和 CSSOM 树是构建渲染树的关键步骤。在这个过程中，浏览器遍历 DOM 树的每个**可见节点**，并查找与之相关联的 CSS 规则。然后，浏览器根据这些 CSS 规则和 DOM 树中的节点信息，构建渲染树。

在构建渲染树时，浏览器会忽略一些不需要显示的节点，例如 `<head>、<script> 和隐藏的元素（例如使用了 display: none 或 visibility: hidden 的元素）。同时，一些 CSS 属性（例如 position: fixed）也会影响渲染树的构建。`

总之，渲染树是由合并后的 DOM 树和 CSSOM 树组成的，它反映了页面的实际呈现结构和样式信息，是浏览器进行绘制的基础。

##  关键词: #DOM树 #CSSOM树 #渲染树 #布局计算 #绘制 #回流 #重排
*[interview]: end
