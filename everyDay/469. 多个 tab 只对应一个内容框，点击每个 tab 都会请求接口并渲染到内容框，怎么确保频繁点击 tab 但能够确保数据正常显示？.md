# Problem:  多个 tab 只对应一个内容框，点击每个 tab 都会请求接口并渲染到内容框，怎么确保频繁点击 tab 但能够确保数据正常显示？

*[interview]: start
在处理多个 tab 切换并请求接口的情况下，你可以考虑以下几种方法来确保频繁点击 tab 时数据能够正常显示：

1. **取消之前的请求**：在每次切换 tab 之前，可以取消之前的未完成的请求，以确保只有最新的请求会得到响应并更新内容框。你可以使用取消请求的库（如 axios 的取消请求）或自行管理请求的标识符来实现。
  - XMLHttpRequest 使用 ==abort== api 取消请求
  - axios 使用 ==cancel token== 取消请求

2. **节流或防抖**：通过使用节流或防抖的技术来控制请求的频率。节流是指限制一个函数在一定时间内只执行一次，而防抖是指延迟执行函数，在一定时间内如果再次触发，则重新计时延迟执行。这样可以防止频繁点击 tab 导致过多的请求发送。你可以使用 Lodash 等库中的节流或防抖函数，或自行实现相关逻辑。

3. 缓存数据：在每次请求的数据到达后，可以将数据缓存在本地或全局状态中，以便在切换回相同的 tab 时能够直接使用缓存的数据，而不需要重新发送请求。可以使用 React 的状态管理库（如 Redux、MobX）或 React 的 Context API 来管理全局状态。

4. 显示加载状态：在发送请求并等待响应时，可以显示一个加载状态或加载动画，以向用户传达正在加载数据的信息。这样可以提高用户体验并降低用户的不确定性。

5. 错误处理：在请求过程中，确保捕获和处理任何可能的错误，如网络错误或服务器返回的错误。可以显示错误提示信息，以便用户了解发生了什么问题，并尽快恢复正常状态。

通过以上方法的组合使用，可以在频繁点击 tab 的情况下保证数据正常显示，提供更好的用户体验和数据的一致性。根据你的具体需求和项目架构，可以选择适合的方式来实现。

## 关键词:  axios, XMLHttpRequest, cancel token, 节流, 防抖, Lodash, Redux, MobX, Context API
*[interview]: end
