# Problem: 说一下你所理解的渲染原理?

*[interview]: start

渲染原理是指浏览器在接收到HTML、CSS、JavaScript等页面资源后，如何将它们转化成可视化的页面，并呈现给用户的过程。这个过程可以分为以下几个步骤：

1. 构建DOM树：浏览器将HTML文档解析成DOM树，即把文档中的所有标签转化成一个个的节点，并建立起它们之间的层次关系。

2. 构建CSSOM树：浏览器将CSS样式表解析成CSSOM树，即把样式表中的所有规则转化成一个个的CSS样式节点，并建立起它们之间的层次关系。

3. 合并生成渲染树(Attachment Render tree)：浏览器将DOM树和CSSOM树合并生成渲染树，即只包含需要显示的节点和样式的树形结构。

4. 创建渲染（布局layout）树，将DOM树中可见节点，添加到布局树中。并计算节点渲染到页面的坐标位置。

5. 通过布局树，进行分层 （根据定位属性、透明属性、transform属性、clip属性等）生产图层树

6. 将不同图层进行绘制(Paint)，转交给合成线程处理。最终生产页面，并显示到浏览器上 (Display)

在这个过程中，JavaScript的执行可能会影响到DOM树和CSSOM树的构建，因此会影响到最终的渲染结果。因此，JavaScript的执行也是浏览器渲染过程中的重要环节之一。

理解渲染原理可以帮助我们更好地优化页面性能，减少页面渲染的时间，提高用户体验。常见的优化手段包括减少DOM元素的数量、减少CSS的规则数量和选择器的复杂度、避免过度重绘和重排等。

## 关键词: CSSOM tree、DOM tree、render tree、layout、分层、paint
*[interview]: end
