# Problem: HTTPS 怎么建立安全通道，HTTPS 的加密过程？

*[interview]: start
## HTTPS
HTTPS 通过CA机构 进行数字签名 发放证书 建立安全通道

HTTPS  解决数据传输安全问题的核心就是使用加密算法：具体来说就是混合加密算法，也就是**对称加密和非对称加密混合使用**。

**对称加密: 加密和解密使用的是同一套密钥。**
**非对称加密: 加密和解密使用两个不同的密钥。公钥和私钥是一对。**

## HTTPS（Hypertext Transfer Protocol Secure）建立安全通道的过程可以分为以下几个步骤：
1. 客户端发起HTTPS请求：客户端通过在URL中使用HTTPS协议（例如"https://example.com"）来发起请求。

2. **服务器获取数字证书**：服务器需要获得一份有效的数字证书，该证书包含了服务器的公钥和其他相关信息。数字证书一般由受信任的证书颁发机构（Certificate Authority, CA）签发。

3. 服务器发送证书给客户端：服务器将数字证书发送给客户端作为响应。

4. 客户端验证证书：客户端接收到服务器发送的数字证书后，会验证证书的有效性。验证过程包括检查证书的签名是否有效、证书是否过期、证书中的域名是否与访问的域名匹配等。

5. 客户端生成随机密钥：如果数字证书验证通过，客户端会生成一个随机的对称密钥，用于后续的数据加密和解密过程。

6. 客户端使用服务器的公钥加密密钥：客户端使用服务器的公钥加密生成的随机密钥，并将加密后的密钥发送给服务器。

7. 服务器使用私钥解密密钥：服务器接收到客户端发送的加密密钥后，使用自己的私钥进行解密，获取到客户端生成的随机密钥。

8. 客户端和服务器建立加密通道：客户端和服务器使用之前生成的随机密钥进行**对称加密**，加密通道建立后，客户端和服务器之间的通信将通过加密的方式进行。

在HTTPS的加密过程中，数字证书起到了关键的作用。它用于验证服务器的身份，并确保客户端与服务器之间的通信是安全的和可信任的。通过加密通信，HTTPS提供了数据的保密性和完整性，防止数据在传输过程中被窃听、篡改或伪造。

## HTTP和HTTPS的区别
HTTPS是在HTTP的基础上加入了SSL协议，SSL依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密（在传输层）HTTP + 加密 + 认证 + 完整性保护 = HTTPS
1. HTTPS协议需要到CA申请证书或自制证书
2. HTTP的信息是明文传输；
   HTTPS则是具有安全性的ssl加密
3. HTTP是直接与TCP进行数据传输；
   而HTTPS运行在SSL/TLS(安全传输层协议)之上，SSL/TLS运行在TCP之上，用的端口也不一样，前者是80（需要国内备案），后者是443
4. HTTP的连接很简单，是无状态的；
   HTTPS协议是由SSL+HTTP协议构建的，可进行加密传输、身份认证的网络协议，比HTTP协议安全

## 关键词: CA证书、对称加密、非对称加密、公钥、私钥
*[interview]: end
