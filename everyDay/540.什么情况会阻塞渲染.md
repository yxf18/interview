# Problem: 什么情况会阻塞渲染?

*[interview]: start
在网页渲染过程中，有一些情况可能会导致渲染阻塞，使页面加载速度变慢或者造成页面失去响应。以下是一些常见的导致渲染阻塞的情况：

1. **JavaScript 执行阻塞：**
   - 当浏览器遇到 `<script>` 标签时，会立即停止解析 HTML，下载并执行 JavaScript 文件，这可能会阻塞页面的渲染。特别是如果 JavaScript 文件体积较大或者需要较长时间执行，会导致页面加载速度变慢。
   - JavaScript 的执行还可能会触发页面的重新布局（reflow）和重绘（repaint），进一步影响页面渲染性能。

2. **CSS 阻塞：**
   - 如果浏览器遇到 `<link>` 标签或者 `<style>` 标签，会阻塞页面的渲染，直到 CSS 文件下载完成并解析完毕。
   - 如果 CSS 文件较多或者包含大量样式规则，也可能导致渲染阻塞，延迟页面的显示。

3. **资源加载阻塞：**
   - 当浏览器遇到图片、视频、音频等外部资源标签（如 `<img>`、`<video>`、`<audio>`）时，会立即发起资源请求，如果资源文件较大或者网络条件较差，可能会导致页面渲染阻塞。
   - 如果页面中包含大量的外部资源，并且资源的请求量过大，也可能会造成渲染阻塞。

4. **渲染树的构建阻塞：**
   - 当浏览器解析 HTML 和 CSS 文件时，会同时构建 DOM 树和 CSSOM 树，并将它们合并成渲染树（Render Tree）。如果 HTML 或 CSS 文件过大，或者包含复杂的样式规则，可能会导致渲染树构建的阻塞，延迟页面的渲染。

为了减少页面的渲染阻塞，可以采取一些优化措施，例如：
- 使用 **defer** 和 **async** 属性延迟 JavaScript 文件的加载和执行；
- 将 JavaScript 代码移动到页面底部，以减少对页面渲染的影响；
- 使用 CSS 压缩和合并技术，减少 CSS 文件的大小和下载时间；
- 使用图片**懒加载**和**延迟加载**等技术，优化资源加载顺序和时间。

通过合理优化页面结构和资源加载顺序，可以有效减少页面的渲染阻塞，提升用户的访问体验。

## 关键词: 渲染阻塞, JavaScript 执行, CSS 阻塞, 资源加载, 渲染树构建, async, defer, 懒加载, 延迟加载
*[interview]: end
